<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Tapper 2026</title>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç Telegram –ø—Ä–∞–≤–∏–ª—å–Ω–æ -->
    <script src="https://telegram.org"></script>
    <style>
        body { background: #1a1a1a; color: white; text-align: center; font-family: 'Arial', sans-serif; margin: 0; touch-action: manipulation; user-select: none; }
        .header { padding: 20px; font-size: 24px; color: #ffd700; font-weight: bold; }
        .stats { display: flex; justify-content: space-around; background: #252525; padding: 10px; margin: 10px; border-radius: 15px; }
        #coin { 
            width: 200px; height: 200px; border-radius: 50%; 
            margin-top: 30px; border: 5px solid #ffd700; 
            cursor: pointer; transition: transform 0.1s;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.2);
            object-fit: cover; /* –ß—Ç–æ–±—ã —Ñ–æ—Ç–æ –Ω–µ —Å–ø–ª—é—â–∏–ª–æ */
        }
        #coin:active { transform: scale(0.92); }
        .shop-btn { background: #ffd700; color: black; border: none; padding: 15px 30px; border-radius: 10px; font-weight: bold; margin-top: 20px; cursor: pointer; }
        .hit-text { position: absolute; color: #ff4444; font-weight: bold; animation: fly 0.6s forwards; pointer-events: none; z-index: 100; }
        @keyframes fly { to { transform: translateY(-100px); opacity: 0; } }
    </style>
</head>
<body>
    <div class="header">üí∞ <span id="balance">0</span></div>
    
    <div class="stats">
        <div>–°–∏–ª–∞: <span id="power">1</span></div>
        <div>–¶–µ–Ω–∞ –∞–ø–¥–µ–π—Ç–∞: <span id="cost">20</span></div>
    </div>

    <!-- –ò–°–ü–û–õ–¨–ó–£–ï–ú –ü–†–Ø–ú–£–Æ –°–°–´–õ–ö–£ –ù–ê –í–ê–®–ï –§–û–¢–û -->
    <img id="coin" src="https://lh3.googleusercontent.com" alt="TAP ME">

    <br>
    <button class="shop-btn" onclick="buyUpgrade()">–£–õ–£–ß–®–ò–¢–¨ –ö–õ–ò–ö üöÄ</button>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
        let tg = window.Telegram.WebApp;
        tg.expand(); // –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ø–∞–º—è—Ç–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
        let coins = parseInt(localStorage.getItem('coins')) || 0;
        let power = parseInt(localStorage.getItem('power')) || 1;
        let cost = parseInt(localStorage.getItem('cost')) || 20;

        const balanceEl = document.getElementById('balance');
        const powerEl = document.getElementById('power');
        const costEl = document.getElementById('cost');

        function updateDisplay() {
            balanceEl.innerText = coins;
            powerEl.innerText = power;
            costEl.innerText = cost;
            localStorage.setItem('coins', coins);
            localStorage.setItem('power', power);
            localStorage.setItem('cost', cost);
        }

        // –ö–ª–∏–∫ –ø–æ —Ñ–æ—Ç–æ
        document.getElementById('coin').addEventListener('click', (e) => {
            // –®–∞–Ω—Å 2% –Ω–∞ "–ú—è—á –≤ –ª–∏—Ü–æ"
            if (Math.random() < 0.02) {
                let penalty = Math.floor(coins * 0.05) + 5;
                coins = Math.max(0, coins - penalty);
                showHit(e.pageX, e.pageY, "–ú–Ø–ß –í –õ–ò–¶–û! -" + penalty);
                if (tg.HapticFeedback) tg.HapticFeedback.notificationOccurred('error');
            } else {
                coins += power;
                if (tg.HapticFeedback) tg.HapticFeedback.impactOccurred('light');
            }
            updateDisplay();
        });

        function buyUpgrade() {
            if (coins >= cost) {
                coins -= cost;
                power += 1;
                cost = Math.floor(cost * 1.8);
                updateDisplay();
                if (tg.HapticFeedback) tg.HapticFeedback.notificationOccurred('success');
            } else {
                tg.showAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç! –ù—É–∂–Ω–æ –µ—â–µ " + (cost - coins));
            }
        }

        function showHit(x, y, text) {
            const div = document.createElement('div');
            div.className = 'hit-text';
            div.style.left = x + 'px';
            div.style.top = y + 'px';
            div.innerText = text;
            document.body.appendChild(div);
            setTimeout(() => div.remove(), 600);
        }

        // –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞
        updateDisplay();
    </script>
</body>
</html>
