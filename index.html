<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Tapper 2026</title>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Telegram API -->
    <script src="https://telegram.org"></script>
    <style>
        body { 
            background: #1a1a1a; color: white; text-align: center; 
            font-family: 'Arial', sans-serif; margin: 0; overflow: hidden;
            touch-action: none; user-select: none; -webkit-user-select: none;
        }
        .header { padding: 40px 10px 10px; font-size: 45px; color: #ffd700; font-weight: bold; }
        
        #coin-container {
            display: flex; justify-content: center; align-items: center;
            height: 300px;
        }

        /* –¢–≤–æ—ë —Ñ–æ—Ç–æ */
        #tap-img {
            width: 220px; height: 220px; border-radius: 50%;
            border: 6px solid #ffd700; object-fit: cover;
            cursor: pointer; display: block;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.4);
            transition: transform 0.05s;
            -webkit-tap-highlight-color: transparent;
        }
        
        .stats { margin-top: 20px; font-size: 20px; color: #bbb; }
        .stats b { color: #ffd700; }

        .btn-upg { 
            margin-top: 25px; padding: 15px 45px; border-radius: 15px;
            border: none; background: #ffd700; font-weight: bold; 
            font-size: 18px; color: #000; cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="header">üí∞ <span id="balance">0</span></div>
    
    <div id="coin-container">
        <!-- –¢–≤–æ—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ -->
        <img id="tap-img" src="https://allwebs.ru" alt="TAP">
    </div>

    <div class="stats">
        –ö–ª–∏–∫: <b id="power">1</b> | –£–ª—É—á—à–∏—Ç—å: <b id="cost">20</b>
    </div>

    <button class="btn-upg" id="upgrade-btn">–ü–†–û–ö–ê–ß–ê–¢–¨ –ö–õ–ò–ö üöÄ</button>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        let coins = Number(localStorage.getItem('coins_v2')) || 0;
        let power = Number(localStorage.getItem('power_v2')) || 1;
        let cost = Number(localStorage.getItem('cost_v2')) || 20;

        const balanceEl = document.getElementById('balance');
        const powerEl = document.getElementById('power');
        const costEl = document.getElementById('cost');
        const img = document.getElementById('tap-img');

        function updateUI() {
            balanceEl.innerText = Math.floor(coins);
            powerEl.innerText = power;
            costEl.innerText = cost;
            localStorage.setItem('coins_v2', coins);
            localStorage.setItem('power_v2', power);
            localStorage.setItem('cost_v2', cost);
        }

        // –†–ï–ê–ö–¶–ò–Ø –ù–ê –ö–õ–ò–ö (–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤)
        img.addEventListener('pointerdown', (e) => {
            e.preventDefault();
            img.style.transform = "scale(0.92)";
            
            // –®–∞–Ω—Å 2% –Ω–∞ –ú—è—á –≤ –ª–∏—Ü–æ
            if (Math.random() < 0.02) {
                let loss = Math.floor(coins * 0.1) + 5;
                coins = Math.max(0, coins - loss);
                tg.showAlert("‚ö°Ô∏è –ú–Ø–ß –í –õ–ò–¶–û! \n–¢—ã –ø–æ–ª—É—á–∏–ª –ø–æ –ª–∏—Ü—É –∏ –ø–æ—Ç–µ—Ä—è–ª " + loss + " –º–æ–Ω–µ—Ç!");
                if (tg.HapticFeedback) tg.HapticFeedback.notificationOccurred('error');
            } else {
                coins += power;
                if (tg.HapticFeedback) tg.HapticFeedback.impactOccurred('medium');
            }
            
            updateUI();
        });

        img.addEventListener('pointerup', () => {
            img.style.transform = "scale(1)";
        });

        // –ü–†–û–ö–ê–ß–ö–ê
        document.getElementById('upgrade-btn').onclick = () => {
            if (coins >= cost) {
                coins -= cost;
                power += 1;
                cost = Math.floor(cost * 2.5);
                updateUI();
                if (tg.HapticFeedback) tg.HapticFeedback.notificationOccurred('success');
            } else {
                tg.showAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç! –ù—É–∂–Ω–æ –µ—â–µ " + (cost - coins));
            }
        };

        updateUI();
    </script>
</body>
</html>
